(this["webpackJsonpchat-client"]=this["webpackJsonpchat-client"]||[]).push([[0],{11:function(e,t,a){e.exports={menu:"ChatMenu_menu__31KIt",chatMenu:"ChatMenu_chatMenu__3J2NJ",helloName:"ChatMenu_helloName__SAjRB",logout:"ChatMenu_logout__2lsTJ",roomManipulators:"ChatMenu_roomManipulators__30lX6",roomManipulatorsButton:"ChatMenu_roomManipulatorsButton__2zCS8",plus:"ChatMenu_plus__1PCpG",firstButton:"ChatMenu_firstButton__340FK",hoverFirst:"ChatMenu_hoverFirst__30vK2",secondButton:"ChatMenu_secondButton__2j7ts",roomsStyles:"ChatMenu_roomsStyles__dMEPI",noRooms:"ChatMenu_noRooms__2tklz"}},147:function(e,t,a){},148:function(e,t,a){"use strict";a.r(t);var o=a(0),n=a(1),s=a.n(n),r=a(43),c=a.n(r),i=a(28),l=a(7),d=a(4),m=a(27),u=a.n(m),j=a(16),h=a.n(j);function p(){var e=Object(n.useRef)([]);e.current=[0,0,0,0].map((function(t,a){return e.current[a]=s.a.createRef()}));return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:h.a.fullPage,onMouseMove:function(t){return function(t,a){[0,0,0,0].map((function(a,o){var n=e.current[o].current.dataset.speed,s=(window.innerWidth-t.pageX*n)/100,r=(window.innerHeight-t.pageY*n)/100;return e.current[o].current.style.transform="translateX(".concat(s,"px) translateY(").concat(r,"px)")}))}(t)},children:Object(o.jsxs)("div",{className:h.a.art,children:[Object(o.jsx)("div",{className:h.a.artBg}),Object(o.jsx)("div",{"data-speed":"7",ref:e.current[0],className:"".concat(h.a.planet," ").concat(h.a.spaceman)}),Object(o.jsx)("div",{"data-speed":"2",ref:e.current[1],className:"".concat(h.a.planet," ").concat(h.a.planet1)}),Object(o.jsx)("div",{"data-speed":"4",ref:e.current[2],className:"".concat(h.a.planet," ").concat(h.a.planet2)}),Object(o.jsx)("div",{"data-speed":"6",ref:e.current[3],className:"".concat(h.a.planet," ").concat(h.a.planet3)}),Object(o.jsx)("div",{className:h.a.artSpace})]})})})}var _=a(35),b=a(2),g=a(9),O=a(46),f=a.n(O),x=a(81),v=a.n(x);function N(e){return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{style:e.style,className:v.a.button,children:e.data})})}var R=a(82),M=a.n(R);function y(e){return Object(o.jsx)("input",{onChange:e.onChange,name:e.name,className:M.a.field,type:e.type,placeholder:e.placeholder,value:e.value})}var C,w=a(6),S=a.n(w),k=a(14),T="AUTH/SWITCH_AUTH",I="AUTH/LOGIN",L="AUTH/CHECK",E="AUTH/CHECK_FAIL",A="AUTH/AUTH_USER_VERIFIED",B="ALERT/SET_ALERT",H="ALERT/REMOVE_ALERT",D="LOADING/LOADING_TRUE",F="LOADING/LOADING_FALSE",P="MODAL/MODAL_VERIFICATION_OPEN",z="MODAL/MODAL_VERIFICATION_CLOSE",J="CHAT/ROOM_MODAL_OPEN",V="CHAT/ROOM_MODAL_CLOSE",Y="CHAT/JOIN_ROOM",W="CHAT/CREATE_NEW_ROOM",K="CHAT/CHOSEN_ROOM",U="CHAT/LOAD_MESSAGES",G="CHAT/NEW_LAST_MESSAGE",X={headers:{"Content-Type":"application/json"}},Z=function(e){var t=new Date(e.toString()),a=t.getHours(),o=t.getMinutes();return a+":"+(o=o<10?"0"+o:o)},Q=a(150),q=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;return function(o){var n=Object(Q.a)();o({type:B,payload:{msg:e,alertType:t,id:n}}),setTimeout((function(){return o({type:H,payload:n})}),a)}},$=function(e){return function(){var t=Object(k.a)(S.a.mark((function t(a){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e&&a({type:D}),e||a({type:F});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ee=a(19),te=a.n(ee),ae=function(){return function(){var e=Object(k.a)(S.a.mark((function e(t){var a,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t($(!0)),null===(a=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),a=""),e.next=6,te.a.post("https://sl-chat.herokuapp.com/api/validToken",null,{headers:{"x-auth-token":a}});case 6:if(!e.sent.data){e.next=14;break}return e.next=10,te.a.get("https://sl-chat.herokuapp.com/api/",{headers:{"x-auth-token":a}});case 10:o=e.sent,t({type:L,payload:o.data}),e.next=15;break;case 14:t({type:E});case 15:t($(!1)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),t(q(e.t0.response.data.msg,"error"));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}()},oe=function(e){return function(){var t=Object(k.a)(S.a.mark((function t(a){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a($(!0)),e=JSON.stringify({email:e}),t.next=5,te.a.post("https://sl-chat.herokuapp.com/api/verificationSend",e,X);case 5:a({type:P}),a($(!1)),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),console.log(t.t0.response.data.msg),a(q(t.t0.response.data.msg,"error"));case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ne=function(e,t){return function(){var a=Object(k.a)(S.a.mark((function a(o){var n,s;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,o($(!0)),n=JSON.stringify({emailLogin:e,passwordLogin:t}),a.next=5,te.a.post("https://sl-chat.herokuapp.com/api/login",n,X);case 5:s=a.sent,localStorage.setItem("auth-token",s.data.token),o({type:I,payload:s.data}),o(ae()),o($(!1)),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),o($(!1)),o(q(a.t0.response.data.msg,"error"));case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()},se=Object(d.b)(null,{register:function(e,t,a,o){return function(){var n=Object(k.a)(S.a.mark((function n(s){var r;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,s($(!0)),r=JSON.stringify({email:e,password:t,confirmPassword:a,name:o}),n.next=5,te.a.post("https://sl-chat.herokuapp.com/api/register",r,X);case 5:s(ne(e,t)),s(oe(e)),s($(!1)),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0.response.data.msg),s($(!1)),s(q(n.t0.response.data.msg,"error"));case 15:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.register,a=Object(l.f)(),s=Object(n.useState)({name:"",email:"",password:"",confirmPassword:""}),r=Object(g.a)(s,2),c=r[0],i=r[1],d=function(e){e.preventDefault();var t=e.target.value;i(Object(b.a)(Object(b.a)({},c),{},Object(_.a)({},e.target.name,t)))};return Object(o.jsx)("div",{children:Object(o.jsxs)("form",{className:f.a.form,children:[Object(o.jsx)(y,{value:c.name,name:"name",onChange:d,type:"name",placeholder:"Your name"}),Object(o.jsx)(y,{value:c.email,name:"email",onChange:d,type:"email",placeholder:"Your E-Mail adress"}),Object(o.jsx)(y,{value:c.password,name:"password",onChange:d,type:"password",placeholder:"Your password"}),Object(o.jsx)(y,{value:c.confirmPassword,name:"confirmPassword",onChange:d,type:"password",placeholder:"Confirm your password"}),Object(o.jsx)("div",{onClick:function(){return t(c.email,c.password,c.confirmPassword,c.name,a)},style:{marginTop:"1rem"},children:Object(o.jsx)(N,{data:"Sign up"})})]})})})),re=Object(d.b)((function(e){return{isLogged:e.auth.isLogged}}),{login:ne,setLoading:$})((function(e){var t=e.login,a=e.isLogged,s=Object(l.f)(),r=Object(n.useState)({email:"",password:""}),c=Object(g.a)(r,2),i=c[0],d=c[1],m=function(e){e.preventDefault();var t=e.target.value;d(Object(b.a)(Object(b.a)({},i),{},Object(_.a)({},e.target.name,t)))};return Object(n.useEffect)((function(){void 0!==a&&!0===a&&s.push("/")}),[a]),Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("form",{className:f.a.form,children:[Object(o.jsx)(y,{value:i.email,name:"email",onChange:m,type:"email",placeholder:"Your E-Mail adress"}),Object(o.jsx)(y,{value:i.password,name:"password",onChange:m,type:"password",placeholder:"Password"}),Object(o.jsx)("div",{style:{marginTop:"1rem"},onClick:function(){return t(i.email,i.password)},children:Object(o.jsx)(N,{data:"Sign in"})})]})})})),ce=a(8),ie=a.n(ce),le=Object(d.b)((function(e){return{user_verified:e.auth.user_verified,user:e.auth.user}}),{emailVerification:function(e){return function(){var t=Object(k.a)(S.a.mark((function t(a){var o,n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a($(!0)),o=localStorage.getItem("auth-token"),n=JSON.stringify({code:e,token:o}),t.next=6,te.a.post("https://sl-chat.herokuapp.com/api/verificationRight",n,X);case 6:a({type:A}),a(q("Successfully signed up.","success")),a($(!1)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),a($(!1)),a(q(t.t0.response.data.msg,"error"));case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},closeVerificationModal:function(){return{type:z}}})((function(e){var t=e.emailVerification,a=e.closeVerificationModal,s=e.user_verified,r=e.user,c=Object(n.useState)(""),l=Object(g.a)(c,2),d=l[0],m=l[1],u=Object(n.useState)(!0),j=Object(g.a)(u,2),h=j[0],p=j[1],_="".concat(ie.a.modalDot," ").concat(ie.a.modalDotActive);return Object(n.useEffect)((function(){s&&p(!1)}),[]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:ie.a.fullPage}),Object(o.jsxs)("div",{className:ie.a.modalWindow,style:{height:!h&&"300px"},children:[h?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:ie.a.modalImage}),Object(o.jsxs)("div",{className:ie.a.modalText,children:[Object(o.jsx)("div",{className:ie.a.modalHeader,children:"Verification code was sent to your email."}),Object(o.jsx)("div",{className:ie.a.modalTitle,children:"Please, paste it down here to prove that you're not a robot."}),Object(o.jsx)("input",{value:d.code,name:d.code,placeholder:"CODE",onChange:function(e){return m(e.target.value)},className:ie.a.modalInput})]})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:"".concat(ie.a.modalImage," ").concat(ie.a.modalEmoji)}),Object(o.jsxs)("div",{className:ie.a.modalText,children:[Object(o.jsxs)("div",{className:ie.a.modalHeader,style:{fontSize:"30px"},children:["Congratulations, ",r.name,"!"]}),Object(o.jsx)("div",{className:ie.a.modalTitle,style:{fontSize:"20px"},children:"You've successfully created an account."})]})]}),Object(o.jsxs)("div",{className:ie.a.modalStaticContent,children:[Object(o.jsxs)("div",{style:{marginRight:h?"":"7rem",display:"flex",flexDirection:"row"},children:[Object(o.jsx)("div",{className:h?_:ie.a.modalDot,style:{marginRight:"1.5rem"}}),Object(o.jsx)("div",{className:h?ie.a.modalDot:_})]}),h&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:ie.a.modalButton,onClick:function(){return a()},children:Object(o.jsx)(N,{style:{backgroundColor:"grey",marginRight:"1rem",width:"7rem",fontSize:"20px",height:"2.7rem",paddingTop:"8px"},data:"Close"})}),Object(o.jsx)("div",{className:ie.a.modalButton,onClick:function(){return t(d)},children:Object(o.jsx)(N,{style:{width:"7rem",fontSize:"20px",height:"2.7rem",paddingTop:"8px"},data:"Submit"})})]}),!h&&Object(o.jsx)(i.b,{to:"/",className:ie.a.modalButton,children:Object(o.jsx)(N,{style:{width:"7rem",fontSize:"20px",height:"2.7rem",paddingTop:"8px"},data:"Start"})})]})]})]})})),de=Object(d.b)((function(e){return{switch_auth:e.auth.switch_auth,modal_open:e.auth.modal_open}}),(function(e){return{switch:function(){return e({type:T})}}}))((function(e){var t=e.switch_auth?"Haven't got and account yet? Try to sign up":"Already have an account Try to sign in";return Object(o.jsxs)("div",{className:u.a.main,children:[e.modal_open&&Object(o.jsx)(le,{}),Object(o.jsxs)("div",{className:u.a.authBack,children:[Object(o.jsx)("div",{className:u.a.logo}),Object(o.jsxs)("div",{className:u.a.auth,children:[e.switch_auth?Object(o.jsx)("div",{className:u.a.authBox,children:Object(o.jsx)(re,{})}):Object(o.jsx)("div",{className:u.a.authBox,children:Object(o.jsx)(se,{})}),Object(o.jsx)("div",{onClick:function(){return e.switch()},className:u.a.switch,children:t})]}),Object(o.jsx)(p,{})]})]})})),me=a(83),ue=a.n(me),je=a(11),he=a.n(je),pe=function(e){return function(t){t({type:J,payload:e})}},_e=function(e){return function(t){t(ae()),t({type:V,payload:e})}},be=function(e){return function(){var t=Object(k.a)(S.a.mark((function t(a){var o,n,s;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=localStorage.getItem("auth-token"),n=JSON.stringify({roomName:e,token:o}),t.next=5,te.a.post("https://sl-chat.herokuapp.com/chat/loadMessages",null,{headers:{"x-auth-token":n}});case 5:s=t.sent,a({type:U,payload:s.data[0]}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a(q(t.t0.response.data.msg,"error"));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(k.a)(S.a.mark((function t(a){var o;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=void 0!==e&&e.name,a({type:K,payload:e}),void 0!==o&&a(be(o));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Oe=function(){return Object(o.jsxs)("svg",{width:"19",height:"17",viewBox:"0 0 19 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("g",{clipPath:"url(#clip0)",children:Object(o.jsx)("path",{d:"M18.747 11.8173L10.1104 4.09008C9.94855 3.94516 9.72884 3.86377 9.4998 3.86377C9.27071 3.86377 9.05105 3.94521 8.88909 4.09013L0.252959 11.8174C-0.0843197 12.1192 -0.0843197 12.6084 0.252959 12.9102C0.59018 13.2119 1.13704 13.212 1.47431 12.9102L9.4998 5.72934L17.5257 12.9102C17.6943 13.0611 17.9154 13.1365 18.1364 13.1365C18.3574 13.1365 18.5785 13.0611 18.7471 12.9101C19.0843 12.6084 19.0843 12.1191 18.747 11.8173Z",fill:"#DAD6D6"})}),Object(o.jsx)("defs",{children:Object(o.jsx)("clipPath",{id:"clip0",children:Object(o.jsx)("rect",{width:"19",height:"17",fill:"white"})})})]})},fe=a(29),xe=a.n(fe),ve=Object(d.b)((function(e){return{user:e.auth.user}}),{chosenRoom:ge})((function(e){var t=e.user,a=e.chosenRoom,s=Object(n.useState)(void 0),r=Object(g.a)(s,2),c=r[0],i=r[1];return Object(o.jsx)(o.Fragment,{children:t.rooms.slice(0).reverse().map((function(e,n){var s,r=t.lastMessages[e.name].lastMessage;return void 0!==r&&(s=r.message.length>=35?r.message.substring(0,35).trimEnd()+"...":r.message),Object(o.jsxs)("div",{className:xe.a.menuRoom,onClick:function(){i(n),a(e)},style:{backgroundColor:c===n&&"#fc8621",border:"0"},children:[Object(o.jsx)("div",{className:xe.a.timeBox,children:Object(o.jsx)("div",{className:xe.a.time,children:void 0!==r&&Z(r.postedAt)})}),Object(o.jsx)("div",{className:xe.a.roomName,children:e.name}),void 0!==r?Object(o.jsx)("div",{className:xe.a.lastMessage,children:s}):Object(o.jsx)("div",{className:xe.a.lastMessage,children:"No messages in room yet."})]},n)}))})})),Ne=Object(d.b)((function(e){return{user:e.auth.user}}),{open_modal:pe,setLoading:$,logout:function(){return function(){var e=Object(k.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{localStorage.setItem("auth-token",""),t(ae())}catch(a){t(q(a.response.data.msg,"error"))}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.user,a=e.open_modal,n=e.logout;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:he.a.menu,children:Object(o.jsxs)("div",{className:he.a.chatMenu,children:[Object(o.jsxs)("div",{className:he.a.helloName,children:[Object(o.jsxs)("div",{children:["Hey, ",t.name]}),Object(o.jsx)("div",{className:he.a.logout,onClick:function(){return n()}})]}),Object(o.jsxs)("div",{className:he.a.roomManipulators,children:[Object(o.jsxs)("div",{onClick:function(){return a("CREATE_NEW_ROOM")},className:"".concat(he.a.roomManipulatorsButton," ").concat(he.a.firstButton),children:[Object(o.jsx)("div",{className:he.a.plus,children:"+"}),Object(o.jsx)("div",{className:he.a.buttonText,children:"new room"})]}),Object(o.jsxs)("div",{onClick:function(){return a("JOIN_EXISTING_ROOM")},className:"".concat(he.a.roomManipulatorsButton," ").concat(he.a.secondButton),children:[Object(o.jsx)("i",{className:he.a.plus,children:Object(o.jsx)(Oe,{})}),Object(o.jsx)("div",{className:he.a.buttonText,children:"join room"})]})]}),Object(o.jsx)("div",{className:he.a.roomsStyles,children:void 0!==t.rooms&&t.rooms.length>0?Object(o.jsx)(ve,{}):Object(o.jsx)("div",{className:he.a.noRooms,children:" No chats yet."})})]})})})})),Re=a(5),Me=a.n(Re),ye=Object(d.b)((function(e){return{typeModal:e.chat.typeModal,user:e.chat.user}}),{close_modal:_e,chatManager:function(e,t,a){return function(){var o=Object(k.a)(S.a.mark((function o(n){var s,r,c;return S.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,n($(!0)),s=localStorage.getItem("auth-token"),r=JSON.stringify({roomName:e,token:s}),o.next=6,te.a.post("https://sl-chat.herokuapp.com/chat/".concat(t),null,{headers:{"x-auth-token":r}});case 6:if(c=o.sent,n({type:L,payload:c.data}),n($(!1)),n(_e()),"join"!==a){o.next=12;break}return o.abrupt("return",n(q("Successfully joined the room!","success")));case 12:if("new"!==a){o.next=14;break}return o.abrupt("return",n(q("Successfully created the room!","success")));case 14:if("leave"!==a){o.next=17;break}return n(q("Successfully left the room!","success")),o.abrupt("return",n(ge(void 0)));case 17:o.next=23;break;case 19:o.prev=19,o.t0=o.catch(0),n($(!1)),n(q(o.t0.response.data.msg,"error"));case 23:case"end":return o.stop()}}),o,null,[[0,19]])})));return function(e){return o.apply(this,arguments)}}()}})((function(e){var t=e.typeModal,a=e.close_modal,s=e.chatManager,r=Object(n.useState)(""),c=Object(g.a)(r,2),i=c[0],l=c[1];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{className:Me.a.modalBg,onClick:function(){return a()}}),Object(o.jsx)("div",{className:Me.a.modalCenter,children:Object(o.jsxs)("div",{className:Me.a.modalRoom,children:["JOIN_EXISTING_ROOM"===t&&Object(o.jsxs)("div",{className:Me.a.modalContent,children:[Object(o.jsx)("div",{className:"".concat(Me.a.modalRoomImg," ").concat(Me.a.modalRoomImgFirst)}),Object(o.jsxs)("div",{className:Me.a.modalRoomText,children:[Object(o.jsx)("div",{className:Me.a.modalRoomHeader,children:"Join room!"}),Object(o.jsx)(y,{name:"roomName",type:"text",placeholder:"Paste name of the room",value:i,onChange:function(e){return l(e.target.value)}}),Object(o.jsxs)("div",{className:Me.a.modalRoomButton,children:[Object(o.jsx)("div",{onClick:function(){return a()},children:Object(o.jsx)(N,{style:{backgroundColor:"grey",marginRight:"1rem",width:"7rem",fontSize:"20px",height:"2.7rem",paddingTop:"8px"},data:"Close"})}),Object(o.jsx)("div",{onClick:function(){return s(i,"joinRoom","join")},children:Object(o.jsx)(N,{style:{width:"7rem",fontSize:"20px",height:"2.7rem",paddingTop:"8px"},data:"Join!"})})]})]})]}),"CREATE_NEW_ROOM"===t&&Object(o.jsxs)("div",{className:Me.a.modalContent,children:[Object(o.jsx)("div",{className:"".concat(Me.a.modalRoomImg," ").concat(Me.a.modalRoomImgSecond)}),Object(o.jsxs)("div",{className:Me.a.modalRoomText,children:[Object(o.jsx)("div",{className:Me.a.modalRoomHeader,children:"Create new room!"}),Object(o.jsx)(y,{name:"roomName",type:"text",placeholder:"Paste name of the room",value:i,onChange:function(e){return l(e.target.value)}}),Object(o.jsxs)("div",{className:Me.a.modalRoomButton,style:{bottom:"-1rem"},children:[Object(o.jsx)("div",{onClick:function(){return a()},children:Object(o.jsx)(N,{style:{backgroundColor:"grey",marginRight:"1rem",width:"7rem",fontSize:"20px",height:"2.7rem",paddingTop:"8px"},data:"Close"})}),Object(o.jsx)("div",{onClick:function(){return s(i,"createNewRoom","new")},children:Object(o.jsx)(N,{style:{width:"7rem",fontSize:"20px",height:"2.7rem",paddingTop:"8px"},data:"Create!"})})]})]})]}),"LEAVE_ROOM"===t&&Object(o.jsxs)("div",{className:Me.a.modalContent,children:[Object(o.jsx)("div",{className:"".concat(Me.a.modalRoomImg," ").concat(Me.a.modalRoomImgThird)}),Object(o.jsxs)("div",{className:Me.a.modalRoomText,style:{marginLeft:"-3rem"},children:[Object(o.jsx)("div",{className:"".concat(Me.a.modalRoomHeader," ").concat(Me.a.modalRoomHeaderLeave),children:"Are you sure to leave this room? If yes, paste the name of the room."}),Object(o.jsx)(y,{name:"roomName",type:"text",placeholder:"Paste name of the room",value:i,onChange:function(e){return l(e.target.value)}}),Object(o.jsxs)("div",{className:"".concat(Me.a.modalRoomButton," ").concat(Me.a.modalRoomButtonLarge),style:{bottom:"1rem"},children:[Object(o.jsx)("div",{onClick:function(){return a()},children:Object(o.jsx)(N,{style:{backgroundColor:"grey",marginRight:"1rem",width:"7rem",fontSize:"20px",height:"2.7rem",paddingTop:"8px"},data:"Close"})}),Object(o.jsx)("div",{onClick:function(){return s(i,"leaveRoom","leave")},children:Object(o.jsx)(N,{style:{width:"7rem",fontSize:"20px",height:"2.7rem",paddingTop:"8px"},data:"Leave"})})]})]})]})]})})]})})),Ce=a(17),we=a.n(Ce),Se=function(){var e=Object(n.useRef)([]);e.current=[0,0,0,0,0,0].map((function(t,a){return e.current[a]=s.a.createRef()}));return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:we.a.decoration,onMouseMove:function(t){return function(t,a){[0,0,0,0,0,0].map((function(a,o){var n=e.current[o].current.dataset.speed,s=(window.innerWidth-t.pageX*n)/100,r=(window.innerHeight-t.pageY*n)/100;return e.current[o].current.style.transform="translateX(".concat(s,"px) translateY(").concat(r,"px)")}))}(t)},children:[Object(o.jsx)("div",{className:we.a.bg}),Object(o.jsx)("div",{className:we.a.person,"data-speed":"2",ref:e.current[0]}),Object(o.jsxs)("div",{className:we.a.firstMessage,"data-speed":"2",ref:e.current[1],children:[Object(o.jsx)("div",{className:we.a.messageBg1}),Object(o.jsx)("div",{className:we.a.message,"data-speed":"2",ref:e.current[2]})]}),Object(o.jsxs)("div",{className:we.a.secondMessage,children:[Object(o.jsx)("div",{className:we.a.messageBg2}),Object(o.jsx)("div",{className:we.a.message2,"data-speed":"1",ref:e.current[3]})]}),Object(o.jsxs)("div",{className:we.a.thirdMessage,"data-speed":"2",ref:e.current[4],children:[Object(o.jsx)("div",{className:we.a.messageBg3}),Object(o.jsx)("div",{className:we.a.message3,"data-speed":"1",ref:e.current[5]})]})]})})},ke=a(30),Te=a.n(ke),Ie=a(84),Le=a.n(Ie),Ee=a(31),Ae=a.n(Ee),Be=Object(d.b)(null,{open_modal:pe,chosenRoom:ge})((function(e){var t=e.room,a=e.open_modal,n=e.chosenRoom;return Object(o.jsxs)("div",{className:Ae.a.roomHeader,children:[Object(o.jsxs)("div",{className:Ae.a.roomHeaderContent,children:[Object(o.jsx)("div",{className:Ae.a.roomHeaderClose,onClick:function(){return n(void 0)},children:"x"}),Object(o.jsx)("div",{className:Ae.a.roomHeaderName,children:t.name}),Object(o.jsx)("div",{className:Ae.a.roomMembers,children:1===t.users.length?Object(o.jsx)("div",{children:"1 member"}):Object(o.jsxs)("div",{children:[t.users.length," members"]})})]}),Object(o.jsx)("div",{className:Ae.a.leaveButton,onClick:function(){return a("LEAVE_ROOM")},children:"leave"})]})})),He=a(18),De=a.n(He),Fe=function(e){var t=e.el,a=e.user,s=Object(n.useState)(!1),r=Object(g.a)(s,2),c=r[0],i=r[1],l=Object(n.useState)(),d=Object(g.a)(l,2),m=d[0],u=d[1],j=Object(n.useRef)();Object(n.useEffect)((function(){t.author.email===a.email?i(!0):i(!1),h(),u(Z(t.postedAt))}),[t]);var h=function(){j.current.scrollIntoView({behavior:"smooth"})};return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:De.a.container,children:Object(o.jsxs)("div",{ref:j,className:c?"".concat(De.a.messageYou," ").concat(De.a.message):"".concat(De.a.messageOpposite," ").concat(De.a.message),children:[Object(o.jsx)("div",{className:De.a.messageName,children:t.author.name}),Object(o.jsx)("div",{className:De.a.messageContent,children:t.message}),Object(o.jsx)("div",{className:c?De.a.messageTimestampRight:De.a.messageTimestampLeft,children:m})]})})})},Pe=s.a.memo((function(e){var t=e.roomMessages,a=e.user,s=Object(n.useState)([]),r=Object(g.a)(s,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){i(t)}),[t]),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:De.a.container,children:c.map((function(e,t){return Object(o.jsx)(Fe,{el:e,user:a},t)}))})})})),ze=function(e){var t=e.newMessages,a=e.user;return Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("div",{className:De.a.container,children:t.map((function(e,t){return Object(o.jsx)(Fe,{el:e,user:a},t)}))})})},Je=Object(d.b)((function(e){return{user:e.auth.user,room:e.chat.room}}),{setAlert:q,loadMessages:be,newLastMessage:function(e){return function(t){t({type:G,payload:e})}}})((function(e){var t=e.room,a=e.user,s=e.newLastMessage,r=Object(n.useState)(""),c=Object(g.a)(r,2),i=c[0],l=c[1],d=Object(n.useState)([]),m=Object(g.a)(d,2),u=m[0],j=m[1];Object(n.useEffect)((function(){(C=Le()("https://sl-chat.herokuapp.com/",{transports:["websocket","polling","flashsocket"]})).emit("join",{user:a,room:t},(function(e){e&&console.log("")})),j([])}),[t.name]),Object(n.useEffect)((function(){C.on("message",(function(e){var o=e.messageToSave,n=e.messagesToSend,r=e.saveRoom;o.to===t.name&&t.name===r.name&&(j(n),a.lastMessages[t.name]={lastMessage:o},s(a))}))}),[u,t.name]),Object(n.useEffect)((function(){return function(){C.emit("leaveRoom")}}),[t.name]);var h=function(e){e.preventDefault(),i&&(C.emit("sendMessage",{message:i,user:a,room:t}),l(""))};return Object(o.jsxs)("div",{className:Te.a.Room,children:[Object(o.jsx)(Be,{room:t}),Object(o.jsxs)("div",{className:Te.a.messages,children:[Object(o.jsx)(Pe,{roomMessages:t.messages,user:a}),Object(o.jsx)(ze,{newMessages:u,user:a})]}),Object(o.jsx)("div",{className:Te.a.RoomInputBox,children:Object(o.jsxs)("div",{className:Te.a.RoomInputBottom,children:[Object(o.jsx)("div",{className:Te.a.sendMessage,onClick:function(e){return h(e)}}),Object(o.jsx)("input",{value:i,className:Te.a.RoomInput,onChange:function(e){return l(e.target.value)},placeholder:"Write a message...",onKeyPress:function(e){return"Enter"===e.key&&h(e)}})]})})]})})),Ve=Object(d.b)((function(e){return{room:e.chat.room}}),{})((function(e){var t=e.room;return Object(o.jsx)(o.Fragment,{children:void 0===t?Object(o.jsx)(Se,{}):Object(o.jsx)(Je,{})})})),Ye=Object(d.b)((function(e){return{isLogged:e.auth.isLogged,open_modal:e.chat.open_modal}}),{checkLogged:ae})((function(e){var t=e.checkLogged,a=e.isLogged,s=e.open_modal,r=Object(l.f)();return Object(n.useEffect)((function(){void 0===a&&t()}),[a]),Object(o.jsx)(o.Fragment,{children:!0===a?Object(o.jsxs)("div",{children:[s&&Object(o.jsx)(ye,{}),Object(o.jsxs)("div",{className:ue.a.chatBox,children:[Object(o.jsx)(Ne,{}),Object(o.jsx)(Ve,{})]})]}):!1===a&&void r.push("/auth")})})),We=a(85),Ke=a(86),Ue=a(39),Ge=a.n(Ue),Xe=Object(d.b)((function(e){return{alerts:e.alert,close_alert:e.alert.close_alert}}),{removeAlert:function(e){return function(t){t({type:H,payload:e})}}})((function(e){var t=e.alerts,a=e.removeAlert;return Object(o.jsx)(o.Fragment,{children:null!==t&&t.length>0&&t.length<=1?Object(o.jsxs)("div",{className:"".concat(Ge.a.alert," ").concat("error"===t[0].alertType?"".concat(Ge.a.alertError):"success"===t[0].alertType&&"".concat(Ge.a.alertSuccess)),children:[Object(o.jsx)(We.Icon,{className:Ge.a.closeIcon,icon:Ke.a,onClick:function(){return a(t[0].id)}}),t[0].msg]},t[0].id):null})})),Ze=a(20),Qe=a.n(Ze),qe=function(){return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("div",{className:Qe.a.container,children:[Object(o.jsx)("div",{className:"".concat(Qe.a.dash," ").concat(Qe.a.first)}),Object(o.jsx)("div",{className:"".concat(Qe.a.dash," ").concat(Qe.a.second)}),Object(o.jsx)("div",{className:"".concat(Qe.a.dash," ").concat(Qe.a.third)}),Object(o.jsx)("div",{className:"".concat(Qe.a.dash," ").concat(Qe.a.fourth)})]})})},$e=Object(d.b)((function(e){return{loading:e.loading.loading}}),null)((function(e){return e.loading?Object(o.jsx)(qe,{}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Xe,{}),Object(o.jsx)(i.a,{children:Object(o.jsxs)(l.c,{children:[Object(o.jsx)(l.a,{path:"/auth",component:de}),Object(o.jsx)(l.a,{exact:!0,path:"/",component:Ye})]})})]})})),et=(a(147),a(26)),tt=a(87),at=a(88),ot={switch_auth:!1,token:void 0,user:void 0,user_verified:void 0,isLogged:void 0,modal_open:!1},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0,a=t.type,o=t.payload;switch(a){case T:return Object(b.a)(Object(b.a)({},e),{},{switch_auth:!e.switch_auth});case I:return Object(b.a)(Object(b.a)({},e),{},{token:o.token,user:o.user,isLogged:!0});case L:return Object(b.a)(Object(b.a)({},e),{},{user:o,isLogged:!0});case E:return Object(b.a)(Object(b.a)({},e),{},{isLogged:!1});case P:return Object(b.a)(Object(b.a)({},e),{},{modal_open:!0});case z:return Object(b.a)(Object(b.a)({},e),{},{modal_open:!1});case A:return Object(b.a)(Object(b.a)({},e),{},{user_verified:!0});case G:return Object(b.a)(Object(b.a)({},e),{},{user:o});default:return e}},st={loading:!1},rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0,a=t.type;t.payload;switch(a){case D:return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case F:return Object(b.a)(Object(b.a)({},e),{},{loading:!1});default:return e}},ct=a(89),it=[],lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0,a=t.type,o=t.payload;switch(a){case B:return[].concat(Object(ct.a)(e),[o]);case H:return e.filter((function(e){return e.id!==o}));case H:return Object(b.a)(Object(b.a)({},e),{},{close_alert:!0});default:return e}},dt={open_modal:!1,typeModal:void 0,user:void 0,room:void 0},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0,a=t.type,o=t.payload;switch(a){case J:return Object(b.a)(Object(b.a)({},e),{},{open_modal:!0,typeModal:o});case V:return Object(b.a)(Object(b.a)({},e),{},{open_modal:!1});case Y:case W:return Object(b.a)(Object(b.a)({},e),{},{user:o});case K:case U:return Object(b.a)(Object(b.a)({},e),{},{room:o});default:return e}},ut=Object(et.combineReducers)({auth:nt,loading:rt,alert:lt,chat:mt}),jt=[at.a],ht=Object(et.createStore)(ut,{},Object(tt.composeWithDevTools)(et.applyMiddleware.apply(void 0,jt)));c.a.render(Object(o.jsx)(d.a,{store:ht,children:Object(o.jsx)($e,{})}),document.getElementById("root"))},16:function(e,t,a){e.exports={art:"decorations_art__3__FG",artBg:"decorations_artBg___R0hY",artSpace:"decorations_artSpace__12gEu",spaceman:"decorations_spaceman__2x4dD",planet:"decorations_planet__3Yqed",planet1:"decorations_planet1__FVANg",planet2:"decorations_planet2__2MDgw",planet3:"decorations_planet3__3Mx7d"}},17:function(e,t,a){e.exports={decoration:"ChosenRoomDecoration_decoration__37fx2",bg:"ChosenRoomDecoration_bg__zaHrP",person:"ChosenRoomDecoration_person__1W4b6",firstMessage:"ChosenRoomDecoration_firstMessage__EzSxQ",messageBg1:"ChosenRoomDecoration_messageBg1__3ZS2S",message:"ChosenRoomDecoration_message__3b8qZ",secondMessage:"ChosenRoomDecoration_secondMessage__1tPzX",messageBg2:"ChosenRoomDecoration_messageBg2__BKDbn",message2:"ChosenRoomDecoration_message2__12LSz",thirdMessage:"ChosenRoomDecoration_thirdMessage__1v5Bm",messageBg3:"ChosenRoomDecoration_messageBg3__1tgLi",message3:"ChosenRoomDecoration_message3__2RG5Z"}},18:function(e,t,a){e.exports={container:"Messages_container__3TI2V",messageYou:"Messages_messageYou__xxZVX",message:"Messages_message__34Riz",messageName:"Messages_messageName__37OVs",messageContent:"Messages_messageContent__K3bwK",messageOpposite:"Messages_messageOpposite__se81O",messageTimestampRight:"Messages_messageTimestampRight__hBznt",messageTimestampLeft:"Messages_messageTimestampLeft__3Jv9z"}},20:function(e,t,a){e.exports={container:"Loader_container__feiF5",dash:"Loader_dash__1LyMU",first:"Loader_first__28dvU",spin:"Loader_spin__6mXZQ",second:"Loader_second__3H2Ik",spin2:"Loader_spin2__2pGNE",third:"Loader_third__Qv10U",spin3:"Loader_spin3__sEEMH",fourth:"Loader_fourth__1yuen",spin4:"Loader_spin4__SC-yG"}},27:function(e,t,a){e.exports={main:"Auth_main__8SZOP",logo:"Auth_logo__17Ci2",auth:"Auth_auth__1v5L7",switch:"Auth_switch__1CrHb",authBack:"Auth_authBack__1gRC9"}},29:function(e,t,a){e.exports={menuRoom:"Rooms_menuRoom__Zzey3",roomName:"Rooms_roomName__2eFfo",lastMessage:"Rooms_lastMessage__gsP9H",timeBox:"Rooms_timeBox__3klQp",time:"Rooms_time__6ieCL"}},30:function(e,t,a){e.exports={Room:"Room_Room__27QUY",RoomInputBox:"Room_RoomInputBox__fAdtP",RoomInputBottom:"Room_RoomInputBottom__2W0Na",RoomInput:"Room_RoomInput__20A_z",sendMessage:"Room_sendMessage__5bcqY",messages:"Room_messages__1OO5U"}},31:function(e,t,a){e.exports={roomHeader:"ChosenRoomHeader_roomHeader__-MN9s",roomHeaderClose:"ChosenRoomHeader_roomHeaderClose__1zo4f",roomHeaderContent:"ChosenRoomHeader_roomHeaderContent__1JMZ4",roomMembers:"ChosenRoomHeader_roomMembers__3JV2z",roomHeaderName:"ChosenRoomHeader_roomHeaderName__3FMMk",leaveButton:"ChosenRoomHeader_leaveButton__2s930"}},39:function(e,t,a){e.exports={alert:"Alert_alert__2h1wn",closeIcon:"Alert_closeIcon__2hIJO",alertError:"Alert_alertError__1sS3p",alertSuccess:"Alert_alertSuccess__3AVZu"}},46:function(e,t,a){e.exports={form:"Register_form__3fYBS"}},5:function(e,t,a){e.exports={modalBg:"RoomModal_modalBg__1a6rc",modalCenter:"RoomModal_modalCenter__37NDS",modalRoom:"RoomModal_modalRoom__nLuWX",slide:"RoomModal_slide__37_zc",modalRoomImg:"RoomModal_modalRoomImg__3bZWL",modalRoomImgFirst:"RoomModal_modalRoomImgFirst__1Fd01",modalRoomImgSecond:"RoomModal_modalRoomImgSecond__CyAJI",modalRoomImgThird:"RoomModal_modalRoomImgThird__3KeHD",modalContent:"RoomModal_modalContent__Jv7Y_",modalRoomText:"RoomModal_modalRoomText__3bh6K",modalRoomButton:"RoomModal_modalRoomButton__28on4",modalRoomButtonLarge:"RoomModal_modalRoomButtonLarge__3pUVs",modalInput:"RoomModal_modalInput__NNuyK",modalRoomHeader:"RoomModal_modalRoomHeader__3LB0Q",modalRoomHeaderLeave:"RoomModal_modalRoomHeaderLeave__B9Wiv"}},8:function(e,t,a){e.exports={fullPage:"Modal_fullPage__FaHHq",modalWindow:"Modal_modalWindow__E2Fj3",slide:"Modal_slide__3ocx3",modalImage:"Modal_modalImage__pweKf",modalEmoji:"Modal_modalEmoji__3rqlF",modalText:"Modal_modalText__32v52",modalHeader:"Modal_modalHeader__3y8SX",modalTitle:"Modal_modalTitle__3lKzg",modalInput:"Modal_modalInput__1ScKk",modalStaticContent:"Modal_modalStaticContent__wo-lV",modalDot:"Modal_modalDot__2P8bX",modalDotActive:"Modal_modalDotActive__3_uNk"}},81:function(e,t,a){e.exports={button:"Button_button__KfcUG"}},82:function(e,t,a){e.exports={field:"Input_field__BaVEt"}},83:function(e,t,a){e.exports={chatBox:"Chat_chatBox__12tcS"}}},[[148,1,2]]]);
//# sourceMappingURL=main.fdf79c84.chunk.js.map